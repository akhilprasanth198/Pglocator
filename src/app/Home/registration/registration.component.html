<div class="container">
  <h2>Register</h2>
  <form (ngSubmit)="onSubmit()" #registrationForm="ngForm">
    <div class="content">
      <div class="user-details">
        <div class="input-box">
          <label for="firstName">First Name</label>
          <input
            id="firstName"
            [(ngModel)]="user.firstName"
            name="firstName"
            required
            #firstName="ngModel"
          />
          <div *ngIf="firstName.invalid && firstName.touched" class="error">
            First Name is required.
          </div>
        </div>

        <div class="input-box">
          <label for="lastName">Last Name</label>
          <input
            id="lastName"
            [(ngModel)]="user.lastName"
            name="lastName"
            required
            #lastName="ngModel"
          />
          <div *ngIf="lastName.invalid && lastName.touched" class="error">
            Last Name is required.
          </div>
        </div>

        <div class="input-box">
          <label for="email">Email</label>
          <input
            id="email"
            [(ngModel)]="user.email"
            name="email"
            type="email"
            required
            pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
            #email="ngModel"
          />
          <div *ngIf="email.invalid && email.touched" class="error">
            <div *ngIf="email.errors?.['required']">Email is required.</div>
            <div *ngIf="email.errors?.['pattern']">Please enter a valid email address.</div>
          </div>
        </div>

        <div class="input-box">
          <label for="dob">Date of Birth</label>
          <input
            id="dob"
            [(ngModel)]="user.dob"
            name="dob"
            type="date"
            required
            #dob="ngModel"
          />
          <div *ngIf="dob.invalid && dob.touched" class="error">
            Date of Birth is required.
          </div>
        </div>

        <div class="input-box">
          <label for="password">Password</label>
          <input
            id="password"
            [(ngModel)]="user.password"
            name="password"
            type="password"
            required
            #password="ngModel"
          />
          <div *ngIf="password.invalid && password.touched" class="error">
            Password is required.
          </div>
        </div>

        <div class="input-box">
          <label for="role">Role</label>
          <select
            id="role"
            [(ngModel)]="user.role"
            name="role"
            required
            #role="ngModel"
          >
            <option value="" disabled>Select Role</option>
            <option value="User">User</option>
            <option value="PGOwner">PG Owner</option>
          </select>
          <div *ngIf="role.invalid && role.touched" class="error">
            Role is required.
          </div>
        </div>
      </div>

      <!-- Optional fields for PGOwner -->
      <div *ngIf="user.role === 'PGOwner'" class="user-details">
        <div class="input-box">
          <label for="phone">Phone</label>
          <input
            id="phone"
            [(ngModel)]="user.phone"
            name="phone"
            type="text"
            pattern="^[0-9]{10}$"
            #phone="ngModel"
          />
          <div *ngIf="phone.invalid && phone.touched" class="error">
            <div *ngIf="phone.errors?.['pattern']">Phone number must be 10 digits long.</div>
          </div>
        </div>

        <div class="input-box">
          <label for="gender">Gender</label>
          <select
            id="gender"
            [(ngModel)]="user.gender"
            name="gender"
            required
            #gender="ngModel"
          >
            <option value="" disabled>Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Both">Both</option>
          </select>
          <div *ngIf="gender.invalid && gender.touched" class="error">
            Gender is required.
          </div>
        </div>

        <div class="input-box">
          <label for="whatsapp">WhatsApp</label>
          <input
            id="whatsapp"
            [(ngModel)]="user.whatsapp"
            name="whatsapp"
            type="text"
            pattern="^[0-9]{10}$"
            #whatsapp="ngModel"
          />
          <div *ngIf="whatsapp.invalid && whatsapp.touched" class="error">
            <div *ngIf="whatsapp.errors?.['pattern']">WhatsApp number must be 10 digits long.</div>
          </div>
        </div>

        <div class="input-box">
          <label for="chatlink">Chat Link</label>
          <input
            id="chatlink"
            [(ngModel)]="user.chatlink"
            name="chatlink"
            type="text"
          />
        </div>

        <div class="input-box">
          <label for="address">Address</label>
          <input
            id="address"
            [(ngModel)]="user.address"
            name="address"
            type="text"
          />
        </div>
      </div>
    </div>

    <button type="submit" [disabled]="!registrationForm.valid">Register</button>
  </form>

  <!-- Alert Messages -->
  <div *ngIf="successMessage" class="alert success">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="alert error">{{ errorMessage }}</div>
</div>
